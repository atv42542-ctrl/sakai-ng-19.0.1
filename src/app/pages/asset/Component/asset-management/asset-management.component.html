<div class="p-4 max-w-7xl mx-auto" dir="rtl">
    <!-- ุงูุนููุงู -->
    <h2 class="text-3xl font-bold mb-8 text-center text-blue-800 flex items-center justify-center gap-3"><fa-icon [icon]="faChartBar" class="text-blue-600"></fa-icon> ุฅุฏุงุฑุฉ ุงูุฃุตูู</h2>

    <!-- ๐ ูุณู ุงูุฅุญุตุงุฆูุงุช -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="bg-white shadow-lg rounded-xl p-6 text-center transform hover:scale-105 transition-transform duration-200">
            <p class="text-gray-600 font-medium">ุนุฏุฏ ุงูุฃุตูู</p>
            <p class="text-2xl font-bold text-blue-700">{{ totalAssets }}</p>
        </div>
        <div class="bg-white shadow-lg rounded-xl p-6 text-center transform hover:scale-105 transition-transform duration-200">
            <p class="text-gray-600 font-medium">ุงููููุฉ ุงูุญุงููุฉ ุงูุฅุฌูุงููุฉ</p>
            <p class="text-2xl font-bold text-green-700">{{ totalCurrentValue | number: '1.0-2' }} ุฏููุงุฑ</p>
        </div>
        <div class="bg-white shadow-lg rounded-xl p-6 text-center transform hover:scale-105 transition-transform duration-200">
            <p class="text-gray-600 font-medium">ูุชูุณุท ูููุฉ ุงูุฃุตู</p>
            <p class="text-2xl font-bold text-purple-700">{{ averageAssetValue | number: '1.0-2' }} ุฏููุงุฑ</p>
        </div>
        <div class="bg-white shadow-lg rounded-xl p-6 text-center transform hover:scale-105 transition-transform duration-200">
            <p class="text-gray-600 font-medium">ุงูุฃุตูู ุงููุดุทุฉ</p>
            <p class="text-2xl font-bold text-yellow-700">{{ activeAssetsCount }}</p>
        </div>
    </div>

    <!-- ๐ ูุณู ุงูููุงุชุฑ -->
    <div class="bg-white p-6 shadow-lg rounded-xl mb-8 flex flex-wrap gap-4 items-end">
        <div class="flex-1 min-w-[200px]">
            <label class="block text-sm font-medium text-gray-700 mb-2">ุจุญุซ ุจุงูุงุณู ุฃู ุงูุฑูู ุงูุชุณูุณูู</label>
            <input type="text" [(ngModel)]="searchText" (ngModelChange)="applyFilters()" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="ุงุจุญุซ ููุง..." />
        </div>
        <div class="flex-1 min-w-[200px]">
            <label class="block text-sm font-medium text-gray-700 mb-2">ุงููุณู</label>
            <input
                id="department"
                pInputText
                [value]="selectedDepartment?.label || ''"
                placeholder="ุงุฎุชุฑ ุงููุณู"
                readonly
                (click)="showSelector = true"
                class="w-full px-4 py-2 border rounded-lg cursor-pointer focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                aria-required="true"
                aria-label="ุงููุณู"
            />
        </div>
        <p-dialog header="ุงุฎุชูุงุฑ ุงููุณู" [(visible)]="showSelector" [modal]="true" [style]="{ width: '50vw' }" [draggable]="false" [resizable]="false">
            <app-department-selector (departmentSelected)="onDepartmentSelect($event)"></app-department-selector>
        </p-dialog>
        <div class="flex-1 min-w-[200px]">
            <label class="block text-sm font-medium text-gray-700 mb-2">ุงููุฆุฉ</label>
            <p-dropdown
                [(ngModel)]="filterCategory"
                (onChange)="applyFilters()"
                [options]="categoryOptions"
                optionLabel="label"
                optionValue="value"
                placeholder="ูู ุงููุฆุงุช"
                styleClass="w-full"
                inputStyleClass="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            >
            </p-dropdown>
        </div>
        <div class="flex-1 min-w-[200px]">
            <label class="block text-sm font-medium text-gray-700 mb-2">ุงูุญุงูุฉ</label>
            <p-dropdown
                [(ngModel)]="filterStatus"
                (onChange)="applyFilters()"
                [options]="statusOptions"
                optionLabel="label"
                optionValue="value"
                placeholder="ูู ุงูุญุงูุงุช"
                styleClass="w-full"
                inputStyleClass="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            >
            </p-dropdown>
        </div>
        <div class="flex-1 min-w-[200px]">
            <label class="block text-sm font-medium text-gray-700 mb-2">ูุทุงู ุชุงุฑูุฎ ุงูุฅูุดุงุก</label>
            <p-calendar
                [(ngModel)]="filterCreationDateRange"
                (onSelect)="applyFilters()"
                dateFormat="yy-mm-dd"
                selectionMode="range"
                placeholder="ุงุฎุชุฑ ูุทุงู ุงูุชุงุฑูุฎ"
                [showIcon]="true"
                styleClass="w-full"
                inputStyleClass="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            >
            </p-calendar>
        </div>
        <div class="flex-1 min-w-[200px]">
            <label class="block text-sm font-medium text-gray-700 mb-2">ูุทุงู ุชุงุฑูุฎ ุงูุชุนุฏูู</label>
            <p-calendar
                [(ngModel)]="filterModifiedDateRange"
                (onSelect)="applyFilters()"
                dateFormat="yy-mm-dd"
                selectionMode="range"
                placeholder="ุงุฎุชุฑ ูุทุงู ุงูุชุงุฑูุฎ"
                [showIcon]="true"
                styleClass="w-full"
                inputStyleClass="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            >
            </p-calendar>
        </div>
        <div class="flex-1 min-w-[200px]">
            <button (click)="clearFilters()" class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 flex items-center gap-2 transition-colors duration-200"><fa-icon [icon]="faTimes"></fa-icon> ูุณุญ ุงูููุงุชุฑ</button>
        </div>
    </div>

    <!-- ุฒุฑ ุฅุถุงูุฉ ุฃุตู -->
    <button routerLink="/assets/add" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 flex items-center gap-2 mb-6 transition-colors duration-200"><fa-icon [icon]="faPlus"></fa-icon> ุฅุถุงูุฉ ุฃุตู ุฌุฏูุฏ</button>

    <!-- ๐ ุฌุฏูู ุงูุฃุตูู -->
    <div class="bg-white shadow-lg rounded-xl overflow-hidden h-full">
        <p-table [value]="filteredAssets" responsiveLayout="scroll" [tableStyle]="{ 'min-width': '500px' }">
            <ng-template pTemplate="header">
                <tr class="bg-gray-100">
                    <th class="px-6 py-3 text-right font-semibold text-gray-700">ุงุณู ุงูุฃุตู</th>
                    <th class="px-6 py-3 text-right font-semibold text-gray-700">ุงูุฑูู ุงูุชุณูุณูู</th>
                    <th class="px-6 py-3 text-right font-semibold text-gray-700">ุงููุณู</th>
                    <th class="px-6 py-3 text-right font-semibold text-gray-700">ุงููุฆุฉ</th>
                    <th class="px-6 py-3 text-right font-semibold text-gray-700">ุงูุญุงูุฉ</th>
                    <th class="px-6 py-3 text-right font-semibold text-gray-700">ุงููููุฉ</th>
                    <th class="px-6 py-3 text-right font-semibold text-gray-700">ุงูุฅุฌุฑุงุกุงุช</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-asset>
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                    <td class="px-6 py-4">{{ asset.assetName }}</td>
                    <td class="px-6 py-4">{{ asset.serial }}</td>
                    <td class="px-6 py-4">{{ asset.department }}</td>
                    <td class="px-6 py-4">{{ asset.assetCategory }}</td>
                    <td class="px-6 py-4">
                        <span
                            class="px-2 py-1 rounded-full text-sm"
                            [ngClass]="{
                                'bg-green-100 text-green-800': asset.status === 'Active',
                                'bg-red-100 text-red-800': asset.status === 'Inactive',
                                'bg-yellow-100 text-yellow-800': asset.status === 'UnderMaintenance'
                            }"
                        >
                            {{
                                asset.status === 'Active'
                                    ? 'ูุดุท'
                                    : asset.status === 'Inactive'
                                      ? 'ุบูุฑ ูุดุท'
                                      : 'ุชุญุช
                            ุงูุตูุงูุฉ'
                            }}
                        </span>
                    </td>
                    <td class="px-6 py-4">{{ asset.assetQuantity | number }}</td>
                    <td class="px-6 py-4">
                        <button pButton icon="pi pi-ellipsis-v" (click)="menu.toggle($event); selectedAsset = asset" class="p-button-secondary p-button-sm" aria-label="ุฎูุงุฑุงุช ุงูุฃุตู"></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>

    <!-- ุงูุชุตูุญ -->
    <p-paginator [rows]="pageSize" [totalRecords]="totalCount" [rowsPerPageOptions]="[10, 25, 50, 100]" (onPageChange)="onPageChange($event)" class="mt-6"></p-paginator>

    <p-toast></p-toast>
    <p-menu #menu [popup]="true" [model]="selectedAsset ? getAssetActions(selectedAsset) : []"></p-menu>
</div>
 -->