<div class="p-4 max-w-3xl mx-auto">
    <div class="flex justify-between items-center mb-6">
        <div class="flex items-center gap-3">
            <h1 class="text-2xl font-bold">Add Department</h1>
            <p-tag *ngIf="!isSaved" severity="warning" value="Not Saved"></p-tag>
        </div>
        <p-button type="button" icon="pi pi-save" label="Save" class="p-button-sm p-button-dark"
            (click)="onSave()"></p-button>
    </div>

    <div class="bg-white p-6 shadow-lg rounded-xl border border-gray-300">
        <form class="space-y-6">
            <!-- Department Name -->
            <div class="form-group">
                <label for="departmentName" class="block text-sm font-medium text-gray-700 mb-2"> Department <span
                        class="text-red-500">*</span> </label>
                <input id="departmentName" pInputText [(ngModel)]="department.name" name="name"
                    class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                    placeholder="Enter department name" required />
            </div>

            <!-- Company -->
            <div class="form-group">
                <label for="company" class="block text-sm font-medium text-gray-700 mb-2"> Company <span
                        class="text-red-500">*</span> </label>
                <input id="company" pInputText [(ngModel)]="department.company" name="company"
                    class="w-full px-4 py-2 border rounded-lg bg-gray-100" [disabled]="true" required />
            </div>

            <!-- Parent Department -->
            <div class="form-group">
                <label for="parentDepartment" class="block text-sm font-medium text-gray-700 mb-2"> Parent Department
                </label>
                <input id="parentDepartment" pInputText [value]="selectedDepartment?.label || ''"
                    name="parentDepartment"
                    class="w-full px-4 py-2 border rounded-lg cursor-pointer focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                    placeholder="Select parent department (optional)" readonly (click)="showSelector = true" />
            </div>

            <!-- Department Selector Dialog -->
            <p-dialog header="اختيار القسم" [(visible)]="showSelector" [modal]="true" [style]="{ width: '50vw' }"
                [draggable]="false" [resizable]="false">

                <app-department-selector  [canSelectGroup]="true" (departmentSelected)="onDepartmentSelect($event)"></app-department-selector>
            </p-dialog>

            <!-- Additional Options -->
            <div class="space-y-6 bg-gray-50 p-6 rounded-lg shadow-sm">
                <h3 class="text-xl font-semibold text-gray-800">Additional Options</h3>

                <div class="flex items-start space-x-3">
                    <p-checkbox [binary]="true" [(ngModel)]="department.isGroup" name="isGroup"
                        inputId="isGroup"></p-checkbox>
                    <label for="isGroup" class="text-sm text-gray-700">
                        <span class="font-medium text-gray-900">Is Group</span><br />
                        <span class="text-gray-500">Mark as a department group instead of an individual
                            department.</span>
                    </label>
                </div>

                <div class="flex items-start space-x-3">
                    <p-checkbox [(ngModel)]="department.disabled" [binary]="true" name="disabled"
                        inputId="disabled"></p-checkbox>
                    <label for="disabled" class="text-sm text-gray-700">
                        <span class="font-medium text-gray-900">Disabled</span><br />
                        <span class="text-gray-500">Department will be inactive in the system.</span>
                    </label>
                </div>
            </div>


        </form>

        <!-- Actions -->
        <div class="flex justify-end gap-4 mt-8">
            <button pButton label="✖ Cancel" class="p-button-secondary" (click)="onCancel()"></button>
            <button pButton label="✔ Save Department" class="p-button-primary" (click)="onSave()"></button>
        </div>
    </div>

    <p-toast></p-toast>
</div>